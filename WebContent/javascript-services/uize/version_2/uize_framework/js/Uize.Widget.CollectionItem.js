/*
	UIZE JAVASCRIPT FRAMEWORK 2010-01-24

	http://www.uize.com/reference/Uize.Widget.CollectionItem.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.CollectionItem',required:['Uize.Node','Uize.Widget.Button'],builder:function(c_a){var c_b=true,c_c=false,c_d;var c_e=c_a.subclass(function(){this.c_f={};},function(){var c_g=this;c_g.c_h('select',function(c_i){c_g.c_j(c_i.domEvent,c_b)}).set({clickToDeselect:c_b});c_g.c_k();c_g.c_h('remove',function(c_i){c_g.fire({name:'Remove',byUser:c_b})});}),c_l=c_e.prototype;c_l.c_h=c_l.addChildButton=Uize.Widget.Button.addChildButton;c_l.c_m=function(){if(this.isWired){var c_n=this.c_n;c_n!=c_d&&this.setNodeInnerHtml('title',c_n);}};c_l.c_o=function(){var c_g=this;if(c_g.isWired){c_g.setNodeProperties('',{className:c_g.c_p+' '+((c_g.c_q?c_g.c_r:c_g.c_s&&c_g.c_t)||'')});var c_u=c_g.c_u,c_v=c_g.c_v;typeof c_u=='string'&&typeof c_v=='string'&&c_g.setNodeProperties('preview',{className:c_g.c_s?c_v:c_u});}};c_l.c_j=function(c_w,c_x){this.fire({name:'Click Selected',domEvent:c_w,forceToggle:c_x});};c_l.c_k=function(){this.children.select.set({selected:this.c_q});};c_l.updateUi=function(){
this.c_o();this.c_m();};c_l.wireUi=function(){var c_g=this;if(!c_g.isWired){c_g.c_p||c_g.set({c_p:c_g.getNode().className});var c_y=c_g.getNode('previewShell')||'imageLink';c_g.wireNode(c_y,{mouseover:function(){c_g.set({c_s:c_b})},mouseout:function(){c_g.set({c_s:c_c})},mousedown:function(c_i){c_g.fire({name:'Item Mouse Down',domEvent:c_i,bubble:c_b})}});if(c_g.c_z)c_g.wireNode(c_y,'click',function(c_i){var c_x=c_g.c_z=='Toggle Selected';c_x||c_g.c_z=='Select'?c_g.c_j(c_i,c_x):c_g.fire({name:'Click Preview',bubble:c_b});});c_a.prototype.wireUi.call(c_g);}};c_e.registerProperties({c_r:'cssClassActive',c_p:'cssClassBase',c_u:'cssClassImage',c_v:'cssClassImageOver',c_t:'cssClassOver',c_A:{name:'locked',value:c_c},c_s:{name:'over',onChange:[function(){var c_g=this;c_g.isWired&&c_g.c_B&&Uize.Tooltip&&Uize.Tooltip.showTooltip(c_g.c_B,c_g.c_s);},c_l.c_o],value:c_c},c_z:'previewClickAction',c_B:'previewTooltip',c_f:{name:'properties',onChange:function(){this.set({c_n:this.c_f.title})}},c_q:{name:'selected',
onChange:function(){this.children.select&&this.c_k();this.c_o();},value:c_c},c_n:{name:'title',onChange:function(){var c_g=this,c_f=c_g.c_f;if(c_f){c_f.title=c_g.c_n;c_g.c_m();}}}});return c_e;}});