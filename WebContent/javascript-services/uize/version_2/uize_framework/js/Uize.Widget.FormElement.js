/*
	UIZE JAVASCRIPT FRAMEWORK 2010-01-24

	http://www.uize.com/reference/Uize.Widget.FormElement.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.FormElement',required:['Uize.Node','Uize.Node.Event'],builder:function(c_a){var c_b=null,c_c;var c_d=c_a.subclass(c_b,function(){var c_e=this;function c_f(){c_e.c_f()}c_e.wire({'Changed.busyInherited':c_f,'Changed.enabledInherited':c_f});}),c_g=c_d.prototype;c_g.c_h=function(){return this.getNode('input')};c_g.c_i=function(){this.setNodeProperties(this.c_h(),{name:this.c_j})};c_g.c_f=function(){var c_e=this;if(c_e.isWired){var c_k=c_e.get('enabledInherited')&& !c_e.get('busyInherited');c_e.setNodeProperties(c_e.c_h(),{readOnly:!c_k,disabled:!c_k});}};c_g.c_l=function(){var c_e=this;if(c_e.isWired){var c_m=c_e.c_h(),c_n=c_e.c_o;c_n+''!=c_e.getNodeValue(c_m)&&c_e.setNodeValue(c_m,c_n);}};c_g.blur=function(){var c_m=this.c_h();c_m&&(Uize.Node.isNode(c_m)?c_m:c_m[0]).blur();};c_g.getProperties=function(){var c_e=this,c_p=c_e.c_p,c_o=c_e.c_o,c_q={value:c_o};if(c_e.isWired){var c_m=c_e.c_h();if(c_p=='select-one'){var c_r=c_m.selectedIndex;Uize.copyInto(c_q,{selectedIndex:c_r,
text:c_r> -1?c_m.options[c_r].text:c_b});}else if(c_p=='select-multiple'){c_q=[];var c_s=c_m.options,c_t=0,c_u=c_s.length,c_v;for(;c_t<c_u;c_t++)(c_v=c_s[c_t]).selected&&c_q.push({value:c_v.value,selectedIndex:c_v.selectedIndex,title:c_v.title});}}return c_q;};c_g.focus=function(){var c_m=this.c_h();c_m&&(Uize.Node.isNode(c_m)?c_m:c_m[0]).focus();};c_g.updateUi=function(){this.c_i();this.c_f();this.c_l();};c_g.wireUi=function(){var c_e=this;if(!c_e.isWired){var c_m=c_e.c_h();if(c_m){c_e.c_p=c_m.type;if(c_e.c_j==c_c)c_e.c_j=c_m.name;function c_w(c_x){c_e.fire(c_x)}function c_y(){c_w('Clicked')}function c_z(){c_w('Blur')}function c_A(){c_w('Focus')}function c_B(){c_w('Key Up')}function c_C(){c_e.set({c_o:c_e.getNodeValue(c_m)})}switch(c_e.c_p){case'text':case'textarea':case'password':c_e.wireNode(c_m,{change:function(){c_C()},keyup:function(c_D){if(Uize.Node.Event.isKeyEnter(c_D)&&c_e.c_p!='textarea')c_w({name:'Ok',domEvent:c_D});else if(Uize.Node.Event.isKeyEscape(c_D))c_w({name:'Cancel',domEvent:c_D});c_C();
c_B();},blur:function(){c_C();c_z();},focus:function(){c_C();c_A();}});break;case'hidden':c_e.wireNode(c_m,'change',c_C);break;case'radio':c_e.set({nodeMap:c_d.copyInto(c_e.get('nodeMap')||{},{input:c_m=Uize.Node.find({tagName:'INPUT',type:'radio',name:c_m.name})})});case'checkbox':c_e.wireNode(c_m,{blur:c_z,click:function(){c_C();c_y();},change:c_C,focus:c_A});break;case'select-one':case'select-multiple':c_e.wireNode(c_m,{change:c_C,blur:c_z,click:function(){c_C();c_y();},keyup:function(){c_C();c_B();},focus:c_A});break;}c_e.c_o==c_c&&c_C();}c_a.prototype.wireUi.call(c_e);}};c_d.registerProperties({c_j:'elementName',c_p:'type',c_o:{name:'value',onChange:c_g.c_l,value:c_b}});return c_d;}});