/*
	UIZE JAVASCRIPT FRAMEWORK 2010-01-24

	http://www.uize.com/reference/Uize.Date.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Date',builder:function(){var _a=function(){};function _b(_c){return(_c<10?'0':'')+_c}var _d={ms:1,seconds:1000,minutes:60000,hours:3600000,days:86400000,weeks:604800000,months:2629743840,years:31556926080};var _e=_a.convert=function(_f,_g,_h){return _f*_d[_g+'']/_d[_h+''];};var _i=_a.resolve=function(_j,_k){return(_j!=null&&_j!=''?(typeof _j=='string'?_a.fromIso8601(_j)||new Date(_j):_j):_k===undefined?new Date:_k);};_a.equal=function(_l,_m,_n){return _a.inRange(_l,_a.getRangeAround(_m,_n||'day'));};_a.toIso8601=function(_j){return((_j=_i(_j)).getFullYear()+'-'+_b(_j.getMonth())+'-'+_b(_j.getDate()));};_a.fromIso8601=function(_o){var _p=_o.match(/(\d{2,})-(\d\d?)-(\d\d?)/),_j;if(_p){_j=new Date;_j.setYear(_p[1]);_j.setDate(1);_j.setMonth(_p[2]-1);_j.setDate(_p[3]);_j.setHours(0,0,0,0);}return _j;};_a.format=_a.toPretty=function(_j,_q){_j=_i(_j);var _r=_j.getFullYear(),_s=_j.getMonth()+1,_t=_u[_s-1],_v=_j.getHours(),_w=_j.getDate(),_x=_w%10,
_y=(_x>3||Math.floor(_w/10)%10==1)?'th':['th','st','nd','rd'][_x],_z=_A[_j.getDay()],_B=_v>11,_C=(_v-_B&&11)||12,_D=_j.getMinutes(),_E=_j.getSeconds();return Uize.substituteInto(_q||'{dayName}, {dayNo}{dayNoSuffix} {monthName} {YYYY}',{date:_j,YYYY:_r,YY:(_r+'').slice(-2),MM:_b(_s),monthNo:_s,monthName:_t,shortMonthName:_t.slice(0,3),DD:_b(_w),dayNo:_w,dayNoSuffix:_y,dayName:_z,shortDayName:_z.slice(0,3),hh:_b(_v),h12:_C,hh12:_b(_C),mm:_b(_D),minutes:_D,ss:_b(_E),seconds:_E,ampm:_B?'pm':'am'},'{KEY}');};_a.getRangeAround=function(_j,_F){var _G=new Date(_j=_i(_j)),_H=new Date(_G);function _I(_J,_K,_L){_G[_J](_K);_H[_J](_L);}function _M(_N,_O){var _P=Math.floor(_j['get'+_N]()/_O)*_O;_I('set'+_N,_P,_P+_O-1);}switch(_F||(_F='month')){case'millennium':case'century':case'decade':_M('FullYear',_F=='millennium'?1000:_F=='century'?100:10);case'year':case'quarter':_F=='quarter'?_M('Month',3):_I('setMonth',0,11);case'month':case'week':if(_F=='week'){var _Q=_j.getDate()-_j.getDay();_I('setDate',_Q,_Q+6);}else{
_I('setDate',1,_a.getDaysInMonth(_H.getMonth(),_H.getFullYear()));}case'day':case'am/pm':_F=='am/pm'?_M('Hours',12):_I('setHours',0,23);case'hour':_I('setMinutes',0,59);case'minute':_I('setSeconds',0,59);case'second':_I('setMilliseconds',0,999);}return{minValue:_G,maxValue:_H};};_a.inRange=function(_j,_R){return((_j=_i(_j))>=_i(_R.minValue,0)&&_j<=_i(_R.maxValue,Infinity));};_a.isLeapYear=function(_S){return _S%4==0&&(_S%100!=0||_S%400==0);};_a.getDaysInMonth=function(_T,_S){return 30+((2773>>_T)&1)-(_T==1&&(2-_a.isLeapYear(_S)));};_a.isRecent=function(_j,_U){return Math.round(_e(new Date-_i(_j),'ms','days'))<=_U;};var _A=_a.dayNames=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],_u=_a.monthNames=['January','February','March','April','May','June','July','August','September','October','November','December'];return _a;}});