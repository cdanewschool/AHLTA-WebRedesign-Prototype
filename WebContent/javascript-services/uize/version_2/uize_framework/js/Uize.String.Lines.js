/*
	UIZE JAVASCRIPT FRAMEWORK 2010-01-24

	http://www.uize.com/reference/Uize.String.Lines.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.String.Lines',required:'Uize.String',builder:function(){var _a=function(){},_b;_a.forEach=function(_c,_d){var _e=0,_f=/([^\n\r]*)(\r\n|\n|\r|$)/g,_g,_h;while(_h!==false&&(_g=_f.exec(_c))&&(_g[0]|| !_c))_h=_d(_g[1],_g[2],_e++);};_a.getIndentRange=function(_c,_i){var _j=Infinity,_k= -_j;if(_c){if(_i==_b)_i='\t';if(_i){var _l=_i.length,_m,_n=new RegExp('(?:^|\\r\\n|\\n|\\r)((?:'+_i.replace(/\t/g,'\\t')+')*)\\S','g'),_o;while(_o=_n.exec(_c)){_j=Math.min(_j,_m=_o[1].length/_l);_k=Math.max(_k,_m);}}}if(_j==Infinity)_j=_k=0;return{minValue:_j,maxValue:_k};};_a.getLinebreakType=function(_c,_p){var _q=_c.match(/\r\n|\n|\r/);return _q?_q[0]:(_p||'\n');};_a.indent=function(_c,_r,_i,_s){if(_i==_b)_i='\t';if(!_r|| !_i)return _c;_s=_s!==false;var _t=Uize.String.repeat(_i,_r);return(_c.replace(new RegExp('(^|\\r\\n|\\n|\\r)'+(_r>0?'()':'('+_i.replace(/\t/g,'\\t')+'){1,'+ -_r+'}')+'('+(_r>0?'[^\\n\\r]':'')+')','g'),function(_u,_v,_w,_x){return(_v+(_s||_v?_t:'')+_x);}));};_a.modify=function(_c,_y){var
 _e=0,_z;return(_c.replace(/([^\n\r]*)(\r\n|\n|\r|$)/g,function(_u,_A,_B){if(!_u)return'';return(typeof(_z=_y(_A,_B,_e++))!='boolean'?_z+_B:_z?_A+_B:'');}));};_a.normalizeIndent=function(_c,_i){return _a.indent(_c,-Uize.String.Lines.getIndentRange(_c,_i).minValue,_i);};_a.removeBlanks=function(_c,_C){function _D(_A){return!!_A}return _a.removeMatching(_c,_C?_D:Uize.String.trim,1);};_a.removeMatching=function(_c,_u,_E){_E= !!_E;return _a.modify(_c,typeof _u=='function'?function(_A){return!!_u(_A)==_E}:function(_A){return _u.test(_A)==_E});};_a.retainMatching=function(_c,_u){return _a.removeMatching(_c,_u,1);};_a.split=function(_c){return(_c.indexOf('\r')+1?_c.replace(/\r\n?/g,'\n'):_c).split('\n');};_a.switchIndentType=function(_c,_F,_G){if(_F==_b)_F='    ';if(_G==_b)_G='\t';var _H=_F.length,_I=[],_m;return(_c.replace(new RegExp('(^|\\r\\n|\\n|\\r)((?:'+_F.replace(/\t/g,'\\t')+')+)','g'),function(_u,_v,_w){return(_v+(_I[_m=_w.length/_H]||(_I[_m]=Uize.String.repeat(_G,_m))));}));};
_a.switchLinebreakType=function(_c,_B){return _c.replace(/\r\n|\n|\r/g,_B==null?'\n':_B);};_a.trim=function(_c,_J){return _a.modify(_c,function(_A){return Uize.String.trim(_A,_J)});};_a.trimLeft=function(_c){return _a.trim(_c,-1);};_a.trimRight=function(_c){return _a.trim(_c,1);};return _a;}});