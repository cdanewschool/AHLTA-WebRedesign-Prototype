/*
	UIZE JAVASCRIPT FRAMEWORK 2010-01-24

	http://www.uize.com/reference/Uize.Node.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Node',builder:function(){var _a=function(){},_b,_c='string',_d='function',_e=true,_f=false,_g=null,_h=navigator,_i=_h.userAgent.toLowerCase(),_j=_h.appName=='Microsoft Internet Explorer',_k=_i.indexOf('applewebkit')> -1,_l=_i.indexOf('gecko')> -1,_m=_i.indexOf('opera')> -1,_n=_l||_m,_o='hidden',_p=Uize.copyInto;var _q=_a._q=function(_r){_s.clientX=_r.clientX;_s.clientY=_r.clientY;};function _t(_u){var _v=document.getElementById(_u);return(!_j||(_v&&_v.id==_u))?_v:_g;}function _w(){var _x=document[_k?'body':'documentElement'];return{scrollLeft:_x.scrollLeft,scrollTop:_x.scrollTop};}function _y(_z){var _A=(_z=_z+'').slice(_z.indexOf('(')+1,_z.indexOf(')'));return Function.apply({},(_A?_A.split(','):[]).concat(_z.slice(_z.indexOf('{')+1,_z.lastIndexOf('}'))));}function _B(_C){if(_C.charCodeAt(0)==111&&_C.charCodeAt(1)==110)_C=_C.slice(2);return(_C.charCodeAt(_C.length-1)==41&&_a.VirtualEvent?_a.VirtualEvent.resolve(_C):_C);}function _D(_E,_F){for(
var _G= -1,_v={},_H=Math.min(_E.length,_F.length);++_G<_H;)_v[_E[_G]]=_F[_G];return _v;}var _I=_a._I={},_J={},_K=0,_L={string:1,number:1,boolean:1},_s={clientX:0,clientY:0};var _M='table-',_N=_M+'row',_O=_M+'cell',_P=_p({SPAN:'inline',THEAD:_M+'header-group',TFOOT:_M+'footer-group',LI:'list-item'},_j&&typeof DOMImplementation=='undefined'?_g:{TABLE:'table',TR:_N,TH:_O,TD:_O,TBODY:_N+'-group',COLGROUP:_M+'column-group',COL:_M+'column',CAPTION:_M+'caption'});_a.display=function(_Q,_R){_R=_R===_b|| !!_R;_S(_Q,function(_T){_T.style.display=_R?(_P[_T.tagName]||'block'):'none';});};var _S=_a.doForAll=function(_Q,_z,_U,_V){if(typeof _Q==_c)_Q=_W(_Q,_U,_V);if(_Q!=_b){if(_X(_Q)){_z(_Q);}else{var _Y=typeof _Q;if((_Y=='object'||_Y==_d)&&typeof _Q.length=='number'){for(var _Z= -1,_0=_Q.length;++_Z<_0;)_S(_Q[_Z],_z,_U,_V);}else if(_Y=='object'){for(var _1 in _Q)_S(_Q[_1],_z,_U,_V);}}}};var _2=_a.doRectanglesOverlap=function(_3,_4,_5,_6,_7,_8,_9,_ba){return(_5-1+ +_3>=_7&&_9-1+ +_7>=_3&&_6-1+ +_4>=_8&&_ba-1+ +_8>=_4);};
var _W=_a.getById=function(_T,_U,_V){if(typeof _T!=_c)return _T;var _v=_V?_V[_T]:_b;if(_v===_b){var _bb=_bc(_U,_T);(_v=_t(_bb))||(((_v=document.getElementsByName(_bb)).length<2)&&(_v=_v[0]||_g));if(_V)_V[_T]=_v;}return _v;};_a.find=function(_bd){if(typeof _bd!='object'|| !_bd||typeof _bd.length=='number'||_X(_bd))return _bd;var _be=document,_bf=[],_bg=_p({},_bd),_bh='root'in _bg?_W(_bg.root):_be;delete _bg.root;if(_bh){var _bi=_bg.tagName;if('id'in _bg&&_L[typeof _bg.id]){var _T=_t(_bg.id);_T&&_bf.push(_T);delete _bg.id;}else if('name'in _bg&&_L[typeof _bg.name]){_bf=_be.getElementsByName(_bg.name);delete _bg.name;}else{var _bj=_L[typeof _bi];_bj&&delete _bg.tagName;_bf=_bh.getElementsByTagName(_bi&&_bj?_bi:'*');_bh=_g;}if(_bh==_be)_bh=_g;if(!_bi||_bi=='*')delete _bg.tagName;}var _bk=_bf.length;for(var _bl in _bg)break;if(!_bk||(_bl==_b&& !_bh))return _bf;var _bm=[],_bn;for(var _bo= -1;++_bo<_bk;){var _T=_bf[_bo];if(_bn=_bh?_bp(_T,_bh):_e){for(var _bq in _bg){var _br=_T[_bq],_bs=_bg[_bq],_bt=typeof _bs;if(!(
_L[_bt]?_br==_bs:(_bs instanceof RegExp?_bs.test(_br||''):(_bt==_d?_bs.call(_T,_br):_e)))){_bn=_f;break;}}}_bn&&_bm.push(_T);}return _bm;};var _bu=_a.getCoords=function(_T){var _bv=0,_bw=0,_bx=0,_by=0,_bz=_e,_bA=_w(),_bB=_bC(window);function _bD(){_bv+=_bA.scrollLeft;_bw+=_bA.scrollTop;}if(_T==window){_bD();_bx=_bB.width;_by=_bB.height;}else if(_X(_T=_W(_T))){_bx=_T.offsetWidth;_by=_T.offsetHeight;if(!(_bx&&_by)&&_T.tagName=='DIV'){for(var _bE=_T.childNodes,_bF=_bE.length;--_bF>=0;){if(_bE[_bF].nodeName.charAt(0)!='#'){var _bG=_bu(_bE[_bF]);if(_bG.width||_bG.height){_bx=Math.max(_bx,_bG.right-_bv+1);_by=Math.max(_by,_bG.bottom-_bw+1);}}}}function _bH(_T){return _bI(_T,'display')=='none'||_bI(_T,'visibility')==_o;}if(_T.tagName=='A'&&_T.childNodes.length==1&&_T.childNodes[0].tagName=='IMG')_T=_T.childNodes[0];var _bJ=_bz= !_bH(_T),_bK=_T,_bL=_T;while(_bL.parentNode&&typeof _bL.parentNode!='unknown'){var _bM=_bL.offsetLeft||0,_bN=_bL.offsetTop||0,_bO=_bL.offsetWidth,_bP=_bL.offsetHeight;if(_bz&&_bH(_bL))_bz=_f;
if(_bL==_bK){_bv+=_bM+(parseInt(_bI(_bL,'borderLeftWidth'))||0);_bw+=_bN+(parseInt(_bI(_bL,'borderTopWidth'))||0);_bK=_bL.offsetParent;_bI(_bL,'position')=='fixed'&&_bD();}if(_bL!=_T&&_bL!=document.body&&_bL!=document.documentElement&&(_bL.scrollWidth>_bO||_bL.scrollHeight>_bP)){_bv-=_bL.scrollLeft;_bw-=_bL.scrollTop;if(_j){_bv+=_bL.clientLeft;_bw+=_bL.clientTop;}if(_bz)_bz=_2(_bv,_bw,_bx,_by,_bM,_bN,_bO,_bP);}_bL=_bL.parentNode;}if(_bz)_bz=_2(_bv,_bw,_bx,_by,_bA.scrollLeft,_bA.scrollTop,_bB.width,_bB.height);}return{x:_bv,y:_bw,width:_bx,height:_by,area:_bx*_by,left:_bv,top:_bw,right:_bv+_bx-1,bottom:_bw+_by-1,seen:_bz};};var _bC=_a.getDimensions=function(_T){if(_T==window){var _x=document.documentElement;return{width:_x.clientWidth||window.innerWidth||_x.offsetWidth,height:_x.clientHeight||window.innerHeight||_x.offsetHeight};}else if(_T=_W(_T)){return{width:_T.offsetWidth||parseInt(_bI(_T,'width'))||0,height:_T.offsetHeight||parseInt(_bI(_T,'height'))||0};}else{return{width:0,height:0};}};
_a.getEffectiveBgColor=function(_T){var _bQ='';_T=_W(_T);while((!_bQ||_bQ=='transparent'||_bQ=='none')&&_T){_bQ=_bI(_T,'backgroundColor');_T=_T.parentNode;}return _bQ;};var _bR=_a.getOpacityProperties=function(_bS){return _j?{filter:'alpha(opacity='+Math.round(_bS*100)+')'}:{opacity:_bS+''};};_a.getOpacityStr=function(_bS){return _bT(_bR(_bS));};var _bU={borderColor:['border','Color'],borderWidth:['border','Width'],padding:1,margin:1},_bI=_a.getStyleAttribute=_a.getStyle=function(_T,_bV){var _bW='';if(typeof _bV==_c){if(_T){var _bX=_j&&_bV=='opacity',_bY=document.defaultView,_bZ=_bY&&_bY.getComputedStyle(_T,'');if(_bX)_bV='filter';if(_bZ){if(!(_bW=_bZ[_bV])){var _b0=_bU[_bV];if(_b0){var _b1=_b0[0]||_bV,_b2=_b0[1]||'',_b3=_bZ[_b1+'Top'+_b2],_b4=_bZ[_b1+'Right'+_b2],_b5=_bZ[_b1+'Bottom'+_b2],_b6=_bZ[_b1+'Left'+_b2];_bW=_b3==_b4&&_b4==_b5&&_b5==_b6?_b6:_b3+' '+_b4+' '+_b5+' '+_b6;}}}else{var _b7=_T.currentStyle;_bW=_b7?_b7.getAttribute(_bV):_T.style[_bV];}if(_bX){
var _b8=_bW.match(/alpha\s*\(\s*opacity\s*=([^\)]*)\)/i);_bW=_b8?_b8[1]/100:1;}}}else{_bW={};if(_T)for(_bV in _bV)_bW[_bV]=_bI(_T,_bV);}return _bW;};var _b9=_a.getText=function(_T){var _ca='';if(_T=_W(_T)){function _cb(_T){if(typeof _T.innerText==_c){_ca=_T.innerText.replace(/\r|\n|\r\n/g,'');}else if(typeof _T.textContent==_c){_ca=_T.textContent;}else{if(_T.nodeType==3)_ca=_T.data;if(_T.childNodes){for(var _bF= -1,_bE=_T.childNodes,_cc=_bE.length;++_bF<_cc;)_ca+=_b9(_bE[_bF]);}}}_cb(_T);}return _ca;};_a.getValue=function(_T){var _bW;if(_T=_W(_T)){if(_X(_T)){var _cd=_T.tagName;if(_cd=='TEXTAREA'){_bW=_T.value;}else if(_cd=='INPUT'){_bW=_T.type=='checkbox'?_T.checked:_T.value;}else if(_cd=='SELECT'){if(_T.multiple){_bW=[];for(var _ce= -1,_cf=_T.options,_cg=_cf.length,_ch;++_ce<_cg;)(_ch=_cf[_ce]).selected&&_bW.push(_ch.value);}else{_bW=_T.value;}}else if(_cd=='IMG'){_bW=_T.src;}else{_bW=_T.innerHTML.replace(/<br\/?>/gi,'\n').replace(/&nbsp;/g,' ');}}else{
_bW=(Uize.findRecord(_T,{tagName:'INPUT',type:'radio',checked:_e})||{}).value;}}return _bW;};_a.injectHtml=function(_Q,_ci,_cj){var _ck,_cl,_cm,_cn,_co,_cp;((_ck=_cj=='inner replace')||(_cl=_cj=='outer replace')||(_cm=_cj=='inner top')||(_cn=_cj=='outer top')||(_co=_cj=='outer bottom')||(_cp=_e));_ci+='';_S(_Q,function(_T){var _cq=_T.childNodes;function _cr(_cs){return _cs&&/<script/i.test(_cs);}function _ct(){return _cr(_ci);}if((_ck||(!_cq.length&&(_cm||_cp)))&& !_ct()){_T.innerHTML=_ci;}else if(_cl&&_j&& !_ct()){_T.outerHTML=_ci;}else{if(_ck)_T.innerHTML='';var _cu=document.createElement('DIV');_cu.innerHTML=_ci;var _cv=_cm?_cq[0]:_co?_T.nextSibling:_T,_cw=_cu.childNodes,_cx=_T.parentNode;function _cy(_T){if(_T.tagName=='SCRIPT'){var _cz=document.createElement('script');if(_T.id)_cz.id=_T.id;if(_T.type)_cz.type=_T.type;_cz.text=_T.text;if(_T.src)_cz.src=_T.src;_T.parentNode.replaceChild(_cz,_T);}else if(_cr(_T.innerHTML)){for(var _bF= -1,_cq=_T.childNodes,_cA=_cq.length;++_bF<_cA;)_cy(_cq[_bF]);}}
while(_cw.length){var _cB=_cw[0];if(_cp||_ck){_T.appendChild(_cB);}else if(_cm){_cv?_T.insertBefore(_cB,_cv):_T.appendChild(_cB);}else if(_cn||_cl){_cx.insertBefore(_cB,_cv);}else if(_co){_cv?_cx.insertBefore(_cB,_cv):_cx.appendChild(_cB);}_cy(_cB);}_cl&&_cx.removeChild(_T);}});};var _X=_a.isNode=function(_T){return!!(_T&&typeof _T=='object'&&(_T.getAttribute||_T.documentElement||(_T.self&&_T.self==_T)));};var _bp=_a.isOnNodeTree=function(_T,_cC){_T=_W(_T);_cC=_W(_cC);while(_T){if(_T==_cC)return _e;_T=_T.parentNode;}return _f;};var _bc=_a.joinIdPrefixAndNodeId=function(_U,_u){return(_U||'')+(_U&&_u?'-':'')+_u;};_a.remove=function(_Q){_S(_Q,function(_T){_T.parentNode.removeChild(_T)});};_a.setClipRect=function(_Q,_b3,_b4,_b5,_b6){var _cD='rect('+_b3+'px, '+_b4+'px, '+_b5+'px, '+_b6+'px)';_S(_Q,function(_T){_T.style.clip=_cD});};var _cE=['left','top','width','height'];_a.setCoords=function(_Q,_cF){_cG(_Q,typeof _cF.length=='number'?_D(_cE,_cF):_cF);};_a.centerInWindow=function(_Q){var _cH=_bu(window);_S(_Q,
function(_T){var _cI=_bC(_T);_a.setCoords(_T,{left:_cH.x+((_cH.width-_cI.width)>>1),top:_cH.y+((_cH.height-_cI.height)>>1)});});};_a.getEventAbsPos=function(_r){var _bA=_w();return{left:(_r||_s).clientX+_bA.scrollLeft,top:(_r||_s).clientY+_bA.scrollTop};};var _cJ=_a.setAbsPos=function(_Q,_cK,_cL){_cL=typeof _cL=='number'?{x:_cL,y:_cL}:(_cL||{x:0,y:0});var _x=document[_k?'body':'documentElement'],_cM=_bC(window);_S(_Q,function(_T){function _cN(_cO,_cP,_cQ,_cR){var _cS=_cK[_cO],_cT=_cL[_cR],_cU=_cS-_x[_cP],_cV=_cT+_cI[_cQ];return(_cS+(_cU+_cV>_cM[_cQ]?Math.max(-_cV,-_cU):_cT));}var _cI=_bC(_T);_cG(_T,{left:_cN('left','scrollLeft','width','x'),top:_cN('top','scrollTop','height','y'),right:'auto',bottom:'auto'});});};_a.setAbsPosAdjacentTo=function(_Q,_cW,_cX){_cW=_W(_cW);var _cY=_bu(_cW),_cZ=_cY.width/2,_c0=_cY.height/2,_c1=_cX=='x'? -1:1;if(!_cZ&& !_c0)_cY=_a.getEventAbsPos();_S(_Q,function(_T){_cJ(_T,{left:_cY.left+_cZ,top:_cY.top+_c0},{x:-_cZ*_c1,y:_c0*_c1});});};_a.setInnerHtml=function(_Q,_cs){_cs+='';
_S(_Q,function(_T){_T.innerHTML=_cs});};var _c2={};_a.setOpacity=function(_Q,_bS){_c2.opacity=_bS;_cG(_Q,_c2);};_a.setProperties=function(_Q,_bd){_S(_Q,function(_T){_p(_T,_bd)});};var _cG=_a.setStyle=function(_Q,_bd){_S(_Q,function(_T){var _c3=_T.style,_c4;if(_j&&'opacity'in _bd)_c3.filter=(_c4=Math.round(_bd.opacity*100))<100?'alpha(opacity='+_c4+')':'';for(var _bV in _bd)_c3[_bV]=(typeof(_c4=_bd[_bV])=='object'&&_c4?(_c4=_c4.valueOf()):_c4)!=_b?(typeof _c4=='number'&&_bV!='opacity'&&_bV!='zIndex'?Math.round(_c4)+'px':_c4+''):'';});};_a.setValue=function(_Q,_bW){_bW+='';_S(_Q,function(_T){var _cd=_T.tagName,_c5=_T.readOnly;if(_c5)_T.readOnly=_f;if(_cd=='TEXTAREA'){_T.value=_bW;}else if(_cd=='INPUT'){var _c6=_T.type;if(_c6=='text'||_c6==_o||_c6=='password'){_T.value=_bW;}else if(_c6=='checkbox'){_T.checked=_bW=='true';}else if(_c6=='radio'){_T.checked=_T.value==_bW;}}else if(_cd=='SELECT'){if(!_bW){_T.selectedIndex= -1;}else{var _cf=_T.options;if(_T.multiple&&(_bW=='*'||_bW.indexOf(',')> -1)){var _c7;
if(_bW!='*'){_c7={};for(var _F=_bW.split(','),_G=_F.length;--_G>=0;)_c7[_F[_G]]=1;}for(var _ce=_cf.length,_ch;--_ce>=0;)(_ch=_cf[_ce]).selected= !_c7||_c7[_ch.value];}else{_T.selectedIndex=Uize.findRecordNo(_cf,{value:_bW},_T.selectedIndex);}}}else if(_cd=='IMG'){if(_bW)_T.src=_bW;}else{_cd=='PRE'&&_j?(_T.innerText=_bW):(_T.innerHTML=_bW.replace(/</g,'&lt;').replace(/\n/g,'<br/>'));}if(_c5)_T.readOnly=_c5;});};_a.show=function(_Q,_c8){_cG(_Q,{visibility:_c8||_c8===_b?'inherit':_o});};_a.showClickable=function(_Q,_c9){_cG(_Q,{cursor:_c9||_c9===_b?(_j?'hand':'pointer'):'default'});};_a.showInLayoutFlow=function(_Q,_c8){_c8=_c8!==_f;_cG(_Q,{position:_c8?'static':'absolute',visibility:_c8?'inherit':_o});};var _bT=_a.stylePropertiesAsStr=function(_bd){var _da=[];for(var _bV in _bd)_da.push(_bV,':',_bd[_bV],'; ');return _da.join('');};var _db=_a.unwire=function(_Q,_dc,_dd,_de){if(typeof _dc=='object'&&_dc&& !_dc.virtualDomEvent){for(var _C in _dc)_db(_Q,_C,_dc[_C],_dd);}else{_a.unwireEventsByOwnerId(_de,
_Q!==_b||_dc!=_b||_dd!=_b?{node:_Q,eventName:_dc,handler:_dd}:_b);}};_a.unwireEventsByOwnerId=function(_df,_dg){var _dh=_J[_df=_df||''];if(_dh){function _di(_dj){if(_dj!==_g){var _dk=_dg&&_dg.eventName,_dl=_dg&&_dg.handler,_dm=_dj||_dk||_dl;if(_dk&&_dk.charCodeAt)_dk=_B(_dk);for(var _dn=_dh.length;--_dn>=0;){var _do=_dh[_dn],_dp=_I[_do],_T=_dp._T,_C=_dp._C;if(!_dm||((!_dj||_dj==(_dp._dq||_T))&&(!_dk||_dk==_C)&&(!_dl||_dl==_dp._dr))){_dm&&_dh.splice(_dn,1);if(_dp._ds){_a.unwireEventsByOwnerId(_dp._ds)}else{try{_T==window?_dt.unwire(_C,_dp._du):_j?_T.detachEvent('on'+_C,_dp._du):_T.removeEventListener(_C,_dp._du,_f);}catch(_dv){}}delete _I[_do];}}(_dm&&_dh.length)||delete _J[_df];}}_dg&&_dg.node!==_b?_S(_dg.node,_di):_di();}};var _dw=_y(function(_do){return(function(_r){var _dp=window.Uize&&Uize.Node._I[_do];return _dp&&_dp._dr.call(_dp._T,_r.windowEvent);});}),_dx=_y(function(_do){return(function(_r){var _dp=window.Uize&&Uize.Node._I[_do];return _dp&&_dp._dr.call(_dp._T,_r||window.event);});}),_dy={click:_dx,
mouseover:_y(function(_do){return(function(_r){var _dp=window.Uize&&Uize.Node._I[_do],_dz=(_r||(_r=window.event)).fromElement||_r.relatedTarget;if(_dp){if(_dz){try{if(!_dz.Uize_Widget_Drag_shield&& !Uize.Node.isOnNodeTree(_dz,_dp._T))_dz=null;}catch(_dv){_dz=null;}}if(!_dz){Uize.Node._q(_r);return _dp._dr.call(_dp._T,_r);}}});}),mouseout:_y(function(_do){return(function(_r){var _dp=window.Uize&&Uize.Node._I[_do],_dA=(_r||(_r=window.event)).toElement||_r.relatedTarget;if(_dp){if(_dA){try{if(!_dA.Uize_Widget_Drag_shield&& !Uize.Node.isOnNodeTree(_dA,_dp._T))_dA=null;}catch(_dv){_dA=null;}}if(!_dA)return _dp._dr.call(_dp._T,_r);}});}),mousedown:_dx,mouseup:_dx};_a.wireEvent=_a.wireEvents=_a.wire=function(_Q,_C,_dr,_df){if(!_C)return;if(_df==_b)_df='';var _dB;if(_C.charCodeAt)_C=_B(_C);if(typeof _C=='object'&& !(_dB= !!_C.virtualDomEvent)){_df=arguments[2]||'';for(var _r in _C)_a.wire(_Q,_r,_C[_r],_df);return;}_S(_Q,function(_T){var _cd=_T.tagName;(_J[_df]||(_J[_df]=[])).push(_K);var _du=(_dB?_a.returnFalse
:_T==window?_dw:_dy[_C]||_dx)(_K);var _dp=_I[_K++]={_T:_T,_C:_C,_dr:_dr,_du:_du};if(_n&&_cd=='BODY'&&_C=='scroll'){_dp._dq=_T;_T=_dp._T=document;}if(_du){var _dC='on'+_C;_T==window?_dt.wire(_C,_du):_j?_T.attachEvent(_dC,_du):_T.addEventListener(_C,_du,_f);if(_cd=='A'&&(_C=='mousedown'||_C=='click')&& !_T[_dC])_T[_dC]=_a.returnFalse;}else if(_dB){_C.wire(_T,_dr,_dp._ds=Uize.getGuid());}});};_a.returnFalse=new Function('return false');_a.returnTrue=new Function('return true');_a.isIe=_j;_a.isSafari=_k;_a.isMozilla=_l;_a.wire(document.documentElement,'mousemove',_q);var _dt=new Uize,_dD=setTimeout(function(){_dt.fire('load')},15000);function _dE(_dF){var _dG='on'+_dF,_dH=window[_dG]||_a.returnFalse;window[_dG]=function(_r){_dF=='load'&&clearTimeout(_dD);_dH.call(window,_r||(_r=event));_dt.fire({name:_dF,windowEvent:_r});};}for(var _dF in{focus:1,blur:1,load:1,beforeunload:1,unload:1,resize:1,scroll:1})_dE(_dF);;return _a;}});