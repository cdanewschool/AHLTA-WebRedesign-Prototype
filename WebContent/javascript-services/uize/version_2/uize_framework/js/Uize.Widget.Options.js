/*
	UIZE JAVASCRIPT FRAMEWORK 2010-01-24

	http://www.uize.com/reference/Uize.Widget.Options.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.Options',required:'Uize.Widget.Button',builder:function(c_a){var c_b;var c_c=c_a.subclass(null,function(){this.c_d= -1;this.c_e=0;}),c_f=c_c.prototype;c_f.c_g=function(){var c_h=this;c_h.set({c_i:c_h.getValueNoFromValue(c_h.c_j)});c_h.updateUi();};c_f.forAll=function(c_k){for(var c_i= -1,c_l=this.c_m.length,c_n=this.children;++c_i<c_l;)if(c_k(c_n['option'+c_i],c_i)===false)break;;};c_f.getValueNoFromValue=function(c_j){var c_m=this.c_m;return(c_m.length?(typeof c_m[0]=='object'?c_c.findRecordNo(c_m,{name:c_j}):c_c.indexIn(c_m,c_j,false,false)): -1);};c_f.updateUi=function(){var c_h=this;if(c_h.isWired&&c_h.c_i!=c_h.c_d){function c_o(c_p,c_q){c_p>=0&&c_c.callOn(c_h.children['option'+c_p],'set',[{selected:c_q}]);}c_o(c_h.c_d,false);c_o(c_h.c_d=c_h.c_i,true);}};c_f.wireUi=function(){var c_h=this;if(!c_h.isWired){c_h.c_i= -1;var c_r=c_h.c_r||Uize.Widget.Button,c_s=c_h.c_s,c_m=c_h.c_m,c_l=c_h.c_e=c_m.length,c_t,c_u;function c_v(){c_t=null;c_h.set({c_w:c_h.c_j,c_x:c_h.c_i});}
function c_y(){c_t&&clearTimeout(c_t);c_u&&clearTimeout(c_u);}function c_z(c_i){var c_j=c_m[c_i];if(typeof c_j=='object')c_j=c_j.name;function c_A(){c_h.set(c_h.c_B?{c_j:c_j}:{c_w:c_j,c_x:c_i});}c_h.addChild('option'+c_i,c_r,c_s).wire('*',function(c_C){if(c_C.name=='Click'){c_h.fire({name:'Before Value Change',value:c_j,valueNo:c_i}).cancel||c_h.set({c_j:c_j});c_h.fire(c_C);}else if(c_C.name=='Over'){c_y();c_h.c_D?(c_u=setTimeout(c_A,c_h.c_D)):c_A();}else if(c_C.name=='Out'){c_y();c_t=setTimeout(c_v,250);}c_h.fire({name:'Option Event',value:c_j,childEvent:c_C});});}for(var c_i= -1;++c_i<c_l;)c_z(c_i);if(c_l){var c_E=c_h.getNode();if(c_E){for(var c_F= -1,c_G,c_H,c_I,c_J=c_E.childNodes,c_K=c_J.length,c_n=c_h.children,c_L=c_h.get('idPrefix'),c_M=c_L.length;++c_F<c_K;){if((c_H=(c_G=c_J[c_F]).id)&& !c_H.indexOf(c_L)&&(c_I=c_n[c_H.slice(c_M+1)]))c_I.set({nodeMap:{'':c_G,shell:null,bed:null}});}}}c_a.prototype.wireUi.call(c_h);c_h.c_g();}};c_c.registerProperties({c_r:'optionWidgetClass',c_s:'optionWidgetProperties',
c_B:'setValueOnMouseover',c_D:{name:'tentativeRestTime',value:0},c_w:{name:'tentativeValue',value:null},c_x:{name:'tentativeValueNo',value:-1},c_j:{name:'value',onChange:function(){var c_h=this;c_h.c_g();c_h.set({c_x:c_h.c_i,c_w:c_h.c_j});},value:null},c_i:{name:'valueNo',value:-1},c_m:{name:'values',onChange:function(){var c_h=this;if(c_h.isWired){for(var c_i= -1,c_e=c_h.c_e||0;++c_i<c_e;)c_h.removeChild('option'+c_i);c_h.unwireUi();c_h.get('html')!=c_b&&c_h.set({built:false});c_h.insertOrWireUi();}},value:[]}});return c_c;}});